<?php
/**
 * @var \CoutureSearch\SearchAPI\Block\Promo\DynamicBanners $block
 * @var \Magento\Framework\Escaper $escaper
 */

$visibleBanners = $block->getVisibleBanners();
?>

<?php if (!empty($visibleBanners)): ?>
<div class="recommendations-wrapper">
    <div class="recommendations-section">
        <div class="block-title content-heading">
            <h2 class="title"><?= $escaper->escapeHtml(__('Hand Picked Banners')) ?></h2>
            <p class="info"><?= $escaper->escapeHtml(__('By considering user preferences, and historical trends by')) ?> <strong>Couture ❤️</strong></p>
        </div>

        <?php foreach ($visibleBanners as $bannerData): ?>
            <?php // For each visible banner, we render the generic item template ?>
            <?= $block->getLayout()->createBlock(\Magento\Framework\View\Element\Template::class)
                ->setTemplate('CoutureSearch_SearchAPI::promo/banner_item.phtml')
                ->setData('banner', $bannerData) // Pass the banner data to the template
                ->toHtml()
            ?>
        <?php endforeach; ?>
    </div>
</div>
<?php endif; ?>
